#!/bin/sh
battery_percent() {
	cat /sys/class/power_supply/BAT0/capacity
}
battery_status() {
	local battery_status=$(cat /sys/class/power_supply/ADP1/online)
	local battery_charge=$(battery_percent)
	if [[ "${battery_charge}" = "100" ]]; then
		echo "${battery_charge}%"
		return
	fi
	case "$battery_status" in
		0)
			echo "${battery_charge}%-"
			;;
		1)
			echo "${battery_charge}%+"
			;;
		*)
			echo "${battery_charge}%?"
			;;
	esac
}

while true; do
	datetime=$(date +'%a %-d %b %H:%M')
	battery=$(battery_status)

	status_line="$battery $datetime"
	xsetroot -name "$status_line"
	sleep 1m
done &

xfce4-volumed # enable xfce volume controller (works in dwm, and with keyboard buttons)
nm-applet & # wifi applet to enable easy connection to wifi networks
xmodmap -e "keycode 135 = Super_L"  # reassign Context Menu button to Windows button
exec dwm

